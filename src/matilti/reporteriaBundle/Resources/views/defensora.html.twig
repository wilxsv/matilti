{% extends '::defensora.html.twig' %}
{% block marco %}
	<div class="span12"><div id="target-1" class="widget"><div class="widget-content"><h1>Matilti feminista. &#169; &#174; Aqui va copy left</h1></div></div></div>
	<div class="span6">
		<div class="widget widget-nopad">
			<div class="widget-header"><i class="icon-list-alt"></i><h3> Resumen de mensajes registrados [Matilti Feminista]</h3></div>
			<!-- /widget-header -->
			<div class="widget-content">
				<div class="widget big-stats-container">
					<div class="widget-content">
						<br />
						<p>Detalle de todo el trafico que registro la herramienta, en el orden de presentación estan los recibidos, enviados, recibidos fallidos (sintaxis incorrecta) y los filtrados.</p>
						<br />
						<div id="big_stats" class="cf">
							<div class="stat"> <i class="icon-anchor"></i> <span class="value">{{ valores['Recibidos'] }}</span> </div>
							<div class="stat"> <i class="icon-thumbs-up-alt"></i> <span class="value">{{ valores['Enviados'] }}</span> </div>
							<div class="stat"> <i class="icon-twitter-sign"></i> <span class="value">{{ valores['Fallidos'] }}</span> </div>
							<div class="stat"> <i class="icon-bullhorn"></i> <span class="value">{{ valores['Otros'] }}</span> </div>
						</div>
					</div>
					<!-- /widget-content --> 
				</div>
			</div>
		</div>
		<!-- /widget -->
	</div>
					<!-- /span6 -->
					<div class="span6">
						<div class="widget"><div class="widget-header"> <i class="icon-bookmark"></i><h3>Enlaces importantes</h3></div>
							<!-- /widget-header -->
							<div class="widget-content">
								<div class="shortcuts">
									<a href="http://colectivafeminista.org.sv/" class="shortcut"><i class="shortcut-icon icon-list-alt"></i><span class="shortcut-label">Colectiva feminista</span> </a>
									<a href="http://observatorio.colectivafeminista.org.sv/" class="shortcut"><i class="shortcut-icon icon-bookmark"></i><span class="shortcut-label">Observatorio de genero</span> </a>
									<a href="http://colectivafeminista.org.sv/radio-de-todas.html" class="shortcut"><i class="shortcut-icon icon-signal"></i> <span class="shortcut-label">La radio de todas</span></a>
									<a href="http://plataforma.colectivafeminista.org.sv/" class="shortcut"><i class="shortcut-icon icon-comment"></i><span class="shortcut-label">Plataforma feminista</span> </a>
									<a href="http://www.isdemu.gob.sv/" class="shortcut"><i class="shortcut-icon icon-user"></i><span class="shortcut-label">Instituto Salvadoreño para el Desarrollo de la Mujer</span> </a>
									<a href="http://www.salud.gob.sv/" class="shortcut"><i class="shortcut-icon icon-file"></i><span class="shortcut-label">Ministerio de Salud</span> </a>
									<a href="http://www.pddh.gob.sv/" class="shortcut"><i class="shortcut-icon icon-picture"></i> <span class="shortcut-label">Procuraduría para la Defensa de los Derechos Humanos</span> </a>
									<a href="http://www.pnc.gob.sv/" class="shortcut"> <i class="shortcut-icon icon-tag"></i><span class="shortcut-label">Policia Nacional Civil - Gobierno de El Salvador</span> </a>
								</div>
								<!-- /shortcuts -->
							</div>
							<!-- /widget-content --> 
						</div>
						<!-- /widget -->
        </div>
        <!-- /span6 --> 
	<div class="span4">
		<div class="widget-header"><i class="icon-bar-chart"></i><h3>Total de denuncias recibidas</h3></div><div class="widget" id="target-3">
			<div class="widget-content">
				<div id="trafico"></div>
			</div> <!-- /widget-content -->
		</div> <!-- /widget -->
	</div>
	<div class="span4">
		<div class="widget-header"><i class="icon-bar-chart"></i><h3>Origen de denuncias</h3></div><div class="widget" id="target-3">
			<div class="widget-content">
				<div id="dlocalidad"></div>
			</div> <!-- /widget-content -->
		</div> <!-- /widget -->
	</div>
	<div class="span4">
		<div class="widget-header"><i class="icon-bar-chart"></i><h3>Instituciones denunciadas</h3></div><div class="widget" id="target-3">
			<div class="widget-content">
				<canvas id="dentidad" class="chart-holder" style="width: auto; height: auto;"> </canvas>
			</div>
		</div> <!-- /widget -->
	</div>
	
	<div class="span12"></div>
	<div class="span3">
		<div class="widget-header"><i class="icon-bar-chart"></i><h3>Origen de denuncias</h3></div><div class="widget" id="target-3">
			<div class="widget-content">
				<h1>Historico de meses</h1>
			</div> <!-- /widget-content -->
		</div> <!-- /widget -->
	</div>
	<div class="span3">
		<div class="widget-header"><i class="icon-bar-chart"></i><h3>Origen de denuncias</h3></div><div class="widget" id="target-3">
			<div class="widget-content">
				<h1>Día de mayor denuncias</h1>
			</div> <!-- /widget-content -->
		</div> <!-- /widget -->
	</div>
	<div class="span3">
		<div class="widget-header"><i class="icon-bar-chart"></i><h3>Origen de denuncias</h3></div><div class="widget" id="target-3">
			<div class="widget-content">
				<h1>Hora mas denunciada</h1>
				<div id="genero"></div>
			</div> <!-- /widget-content -->
		</div> <!-- /widget -->
	</div>
	<div class="span3">
		<div class="widget-header"><i class="icon-bar-chart"></i><h3>Origen de denuncias</h3></div><div class="widget" id="target-3">
			<div class="widget-content">
				<h1>Grafico de radar</h1><div id="reglas"></div>
			</div> <!-- /widget-content -->
		</div> <!-- /widget -->
	</div>
	
	<div class="span12">
		<div class="widget-header"><i class="icon-bar-chart"></i><h3>Mapa de denuncias</h3></div><div class="widget" id="target-3">
			<div class="widget-content">
				<div id="map"></div>
			</div>
		</div> <!-- /widget -->
	</div>
{% endblock %}
{% block js %}
 <link rel="stylesheet" href="http://cdn.oesmith.co.uk/morris-0.4.3.min.css">
 <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.0/jquery.min.js"></script>
 <script src="//cdnjs.cloudflare.com/ajax/libs/raphael/2.1.0/raphael-min.js"></script>
 <script src="http://cdn.oesmith.co.uk/morris-0.4.3.min.js"></script>
 
  </script><script src="http://www.humblesoftware.com/static/js/hsd.js?d3fa1"></script>
  <!--[if IE]><script src="http://www.humblesoftware.com/static/lib/FlashCanvas/bin/flashcanvas.js"></script><![endif]-->
  <script src="http://www.humblesoftware.com/static/js/hsd-flotr2.js"></script>
{% endblock %}
{% block crudMsg %}
	<script>
		Morris.Donut({
			element: 'trafico',
			data: [ {label: "Denuncias", value: {{ valores['total_denuncias'] }}}, {label: "Msg directos", value: {{ valores['Recibidos']-valores['total_denuncias']-valores['Otros'] }}}, {label: "Otros", value: {{ valores['Otros'] }}} ]
		});
	</script>
	<script>
		Morris.Bar({
			element: 'dlocalidad',
			data: [{% for r in d_localidad %} {y: '{{ r.nombrelocalidad }}', a: {{ r.total }} },{% endfor %}],
			xkey: 'y',
			ykeys: ['a'],
			labels: ['Total de denuncias'],
			xLabelAngle: 35,
		});
	</script>
	<script>
		Morris.Area({
			element: 'dentidad',
			data: [{% for r in d_entidad %} {y: '{{ r.nombreentidad }}', a: {{ r.total }} },{% endfor %}],
			xkey: 'y',
			ykeys: ['a'],
			labels: ['Total de denuncias'],
		});
	</script>
	<script>
		var lineChartData = {
			labels: [{% for r in d_entidad %}"{{ r.nombreentidad }}",{% endfor %}],
			datasets: [
				{
				    fillColor: "rgba(151,187,205,0.5)",
				    strokeColor: "rgba(151,187,205,1)",
				    pointColor: "rgba(151,187,205,1)",
				    pointStrokeColor: "#fff",
				    data: [{% for r in d_entidad %} {{ r.total }},{% endfor %}]
				},
				{
				    fillColor: "rgba(220,220,220,0.5)",
				    strokeColor: "rgba(220,220,220,1)",
				    pointColor: "rgba(220,220,220,1)",
				    pointStrokeColor: "#fff",
				    data: [{% for r in d_entidad %} {{ r.total/valores['total_denuncias']*100 }},{% endfor %}]
				},
			]

        }

        var myLine = new Chart(document.getElementById("dentidad").getContext("2d")).Line(lineChartData);
	</script>
	
 <script>
(function basic_pie(container) {
    var d1 = [[0, 53]],
        d2 = [[0, 97]],
        d3 = [[0, 454]],
        graph;
    graph = Flotr.draw(container, [{
        data: d1, label: "Hombres" }, {
        data: d2, label: "Datos incompletos" }, {
        data: d3, label: "Mujeres", pie: { explode: 50 } }], {
        HtmlText: false,
        grid: { verticalLines: false, horizontalLines: false },
        xaxis: { showLabels: false },
        yaxis: { showLabels: false },
        pie: { show: true, explode: 6 },
        mouse: { track: true },
        legend: { position: "se", backgroundColor: "#D2E8FF" }
    });
})(document.getElementById("genero"));
 </script>
 <script>
 $(function () {
(function basic_radar(container) {
    var s1 = { label: "Enviados", data: [ [0, 2345], [1, 1045], [2, 21], [3, 975], [4, 765], [5, 808], [6, 132], [7, 174], [8, 677], [9, 8] ] },
        s2 = { label: "Recividos", data: [ [0, 586], [1, 522], [2, 21], [3, 975], [4, 255], [5, 202], [6, 54], [7, 58], [8, 677], [9, 8] ] },
        graph, ticks;
    ticks = [ [0, "Denuncia"], [1, "Redes Sociales"], [2, "Cerrar"], [3, "Estatus"], [4, "Dato"], [5, "Consejo"], [6, "Abuso"], [7, "Ayuda"], [8, "Invitar"], [9, "Salir"] ];
    graph = Flotr.draw(container, [s1, s2], {
        radar: { show: true },
        grid: { circular: true, minorHorizontalLines: true },
        yaxis: { min: 0, max: 2345, minorTickFreq: 2 },
        xaxis: { ticks: ticks },
        mouse: { track: true }
    });
})(document.getElementById("reglas"));
});
    </script>
{% endblock %}
{% block css %}
	 <script src="http://maps.google.com/maps/api/js?sensor=true"></script>
 <script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/data.json"></script>
 <script type="text/javascript">
      var script = '<script type="text/javascript" src="http://google-maps-utility-library-v3.googlecode.com/svn/trunk/markerclusterer/src/markerclusterer';
      if (document.location.search.indexOf('compiled') !== -1) {
        script += '_compiled';
      }
      script += '.js"><' + '/script>';
      document.write(script);
    </script>
    <script type="text/javascript">
      function initialize() {
        var center = new google.maps.LatLng(13.933729,-89.02583);
        var map = new google.maps.Map(document.getElementById('map'), {
          zoom: 14,
          center: center,
          mapTypeId: google.maps.MapTypeId.ROADMAP
        });

        var markers = [];
        {% for i in 1..valores['total_denuncias'] %}
         var latLng = new google.maps.LatLng( {{13.928652 + (13.942481-13.928652)*(random(604) / 604)}}, -{{89.015536 - (89.015536-89.033818)*(random(604) / 604)}});
         var marker = new google.maps.Marker({ position: latLng });
         markers.push(marker);
        {% endfor %}        
        var markerCluster = new MarkerClusterer(map, markers);
      }
      google.maps.event.addDomListener(window, 'load', initialize);
    </script>
	<style type="text/css">
		#reglas { width : auto; height: 300px; margin: 8px auto; }
		#genero { width : auto; height: 300px; position:fixed; }
		#map { width: auto; height: 360px; margin: 8px auto; }
	</style>
{% endblock %}
